<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2014-07-26 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Powerunit - Java Testing framework for JDK 1.8 - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20140726" />
    <meta http-equiv="Content-Language" content="en" />
                                                    
<link rel="icon" href="logo.png" type="image/png"/>
                                                        
<link rel="shortcut icon" href="logo.png" type="image/png"/>
                      
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Powerunit - Java Testing framework for JDK 1.8
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2014-07-26</span>
                  &nbsp;| <span id="projectVersion">Version: 0.2.0-SNAPSHOT</span>
                      </div>
            <div class="xright">        
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                       <h5>General documentations</h5>
                  <ul>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="release.html" title="Release principles">Release principles</a>
            </li>
                                                                                                                                                      <li class="expanded">
                          <a href="helloworldmaven.html" title="Samples">Samples</a>
                    <ul>
                      <li class="none">
                          <a href="helloworldmaven.html" title="HelloWorld Test">HelloWorld Test</a>
            </li>
                      <li class="none">
                          <a href="equalsverifier.html" title="EqualsVerifier integration">EqualsVerifier integration</a>
            </li>
                      <li class="none">
                          <a href="parameters.html" title="Parameterized tests">Parameterized tests</a>
            </li>
                      <li class="none">
            <strong>Rule chain</strong>
          </li>
                      <li class="none">
                          <a href="assertion.html" title="Assertions">Assertions</a>
            </li>
              </ul>
        </li>
          </ul>
                                                                                                                                     <a href="../" title="PowerUnit" class="poweredBy">
        <img class="poweredBy"  alt="PowerUnit" src="logo.png"     />
      </a>
                                                                                                                <a href="https://travis-ci.org/powerunit/powerunit" title="Travis-ci" class="poweredBy">
        <img class="poweredBy"  alt="Travis-ci" src="https://travis-ci.org/powerunit/powerunit.svg?branch=master"     />
      </a>
                       
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2>Rule chains<a name="Rule_chains"></a></h2>
<p>As shown in <a href="./helloworldmaven.html">the helloworld sample</a>, it is possible to use one field as a Test Rule Chain. A test rule chain defines action that must be done before or after the several test method executions. This concept is a key element of PowerUnit and is different of the test rule chain of junit in several ways. One key difference is that PowerUnit doesn't provide any annotation to mark a method to be executed before or after a test ; This must be done by using a test rule chain.</p>
<div class="section">
<h3>Defining before and after method<a name="Defining_before_and_after_method"></a></h3>
<div class="source">
<pre>import ch.powerunit.Rule;
import ch.powerunit.Test;
import ch.powerunit.TestRule;
import ch.powerunit.TestSuite;

public class MyBeanTest implements TestSuite {
    @Rule
    public final TestRule rule = before(this::prepare).around(
            after(this::after));

    private MyBean bean;

    private void prepare() {
        bean = new MyBean();
    }

    private void after() {
        bean = null;
    }

    @Test
    public void testSimple() {
        bean.setField1(&quot;x&quot;);
        assertThat(bean.getField1()).is(&quot;x&quot;);
    }
}</pre></div>
<p>This test class use a test rule to define action to be done before and after every test method. To do so, the rule chain is started by using the <tt>before</tt> method, passing as parameter a reference to the method <tt>prepare</tt>. This method return a chainable rule that provides the around method, which receive as a parameter another rule that is to be executed <i>inside</i> the previous one. This new rules is defined by using the <tt>after</tt> method. From a field initialization perspective, this will :</p>
<ul>
<li>Create a first rule that will execute the method <tt>prepare</tt> before every test.</li>
<li>Create a second rule that will execute the method <tt>after</tt> after every test.</li>
<li>Merge these two rules in a new ones that will take execute the method <tt>prepare</tt> before every test <b>and</b> execute the method <tt>after</tt> after every test.</li></ul>
<p>From a DSL perspective, the <tt>around</tt> method use to chain the rule assume that the left side of the usage is execute around the right side. This principe ensure that when it is required to have to before (or after) method, the order between these methods is strictly deterministic.</p></div>
<div class="section">
<h3>Starting a test rule chain<a name="Starting_a_test_rule_chain"></a></h3>
<p>A test rule is at the same time a test rule chain, thanks to the default method of Java 8. The interesting side effect is that it is not required to have special rule to be used to aggregate other rules. A test rule chain can be started in several ways :</p>
<ul>
<li>Using the <tt>before</tt> or <tt>after</tt> method to create the first rule.</li>
<li>Create (using a constructor for instance) to create an instance of the rule.</li>
<li>Use any other DSL method that return a test rule (for instance the mockitoRule).</li></ul>
<p>What is essential is to start with the most outer rule.</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2014.
          All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
